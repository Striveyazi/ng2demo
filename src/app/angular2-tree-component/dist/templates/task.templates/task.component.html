<div
      [hidden]="task.is_hidden"
      class="tree-node tree-node-level-{{ task.level }}"
      [class.tree-node-expanded]="task.is_expanded"
      [class.tree-node-collapsed]="!task.is_expanded"
      [class.tree-node-leaf]="!task.is_root"
      [class.tree-node-active]="task.is_active"
      [class.tree-node-focused]="task.is_focused" 
      class="{{task.pos}}">
      <TreeNodeDropSlot
        [task]="task.parent"
        ></TreeNodeDropSlot>
        <div class="task-container">
		      <!-- toggle -->
		      <span
		        *ngIf="task.hasChild"
		        class="toggle-children-wrapper fl"
		        (click)="expanded()">
		         <span class="toggle-children fa fa-angle-down"></span>		
		      </span>
		      <!--<span
		        *ngIf="!(task.data &&task.data.hasChild)"
		        class="toggle-children-placeholder fl">
		      </span>-->
		      <div class="node-content-wrapper drop-down"
		        #nodeContentWrapper
		        [class.is-dragging-over]="isDraggingOver(this)"
		        (click)="mouseAction()"
		        (dblclick)="mouseAction()"
		        (contextmenu)="mouseAction()"
		        [draggable]="task.allow_drag"
		        (dragstart)="onDragStart($event)"
		        (drop)="onDrop($event)"
		        (dragend)="onDragEnd()"
		        (dragover)="onDragOver($event)"
		        (dragleave)="onDragLeave(nodeContentWrapper, $event)"
		        >
		
		        <TreeNodeContent [task]="task"></TreeNodeContent>
		      </div>

      </div>
      <div class="tree-children" *ngIf="task.is_expanded">
        <div *ngIf="task.hasChild">
          <TreeNode
            *ngFor="let child_task of task.children;"
            [task]="child_task">
          </TreeNode>
        </div>
        <LoadingComponent
          class="tree-node-loading"
          *ngIf="!task.children"
        ></LoadingComponent>
      </div>
      <TreeNodeDropSlot
        [task]="task.parent"
        ></TreeNodeDropSlot>
</div>